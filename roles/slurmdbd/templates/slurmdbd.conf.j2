#
# Sample /etc/slurmdbd.conf
#
ArchiveEvents=yes
ArchiveJobs=yes
ArchiveResvs=yes
ArchiveSteps=no
ArchiveSuspend=no
ArchiveTXN=no
ArchiveUsage=no
#ArchiveScript=/usr/sbin/slurm.dbd.archive
AuthInfo=/var/run/munge/munge.socket.2
AuthType=auth/munge
DbdHost={{ ansible_hostname }}
DbdAddr={{ ansible_hostname }}
DbdPort={{ slurmdbd_port | default(6819) }}
DebugLevel=debug3
PurgeEventAfter=1month
PurgeJobAfter=12month
PurgeResvAfter=1month
PurgeStepAfter=1month
PurgeSuspendAfter=1month
PurgeTXNAfter=12month
PurgeUsageAfter=24month
LogFile=/var/log/slurm/slurmdbd.log
PidFile=/var/run/slurmdbd.pid
SlurmUser=slurm
StoragePass={{ slurm_db_password | default('slurm_password') }}
StorageType=accounting_storage/mysql
StorageUser={{ slurm_db_user | default('slurm') }}
StorageHost=localhost
StorageLoc={{ slurm_db_name | default('slurm_acct_db') }}